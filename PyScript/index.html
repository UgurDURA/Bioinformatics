<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>PGS Calculator</title>


<!--PyScript-->
<link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
<script defer src="https://pyscript.net/alpha/pyscript.js"></script>

  <!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  <!-- GoogleFonts -->
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300&display=swap" rel="stylesheet">


    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/1bc45e4475.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/styles.css">

   <!-- JavaScript Bokeh -->

  <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/@holoviz/panel@0.13.0/dist/panel.min.js"></script>

  <script src="https://pyodide-cdn2.iodide.io/v0.15.0/full/pyodide.js"></script>
</head>

<body>
    <section id = "title">
        <nav class = "navbar navbar-expand-lg navbar-dark bg-dark">

            <a class = "navbar-brand" href="">PGS Calculator</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
        
              <div class = "collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav  ms-auto">
                    <li class = "nav-item">
                        <a class = "nav-link" href="">Contact</a>
                    </li>
                    <li class = "nav-item">
                        <a class = "nav-link" href="">Pricing</a>
                    </li>
                    <li class = "nav-item">
                        <a class = "nav-link" href="">Calculate</a>
                    </li>
            
                </ul>
        
              </div>
        
        </nav>
        <h1>
            <py-script>
                print("Hello World")
            </py-script>
        </h1>


      <!-- Title -->
      <div class="row">


        <div class="col-lg-6 col-md-12 col-sm-12">

          <h1 class="big-heading">Polygenic Risk Score Analysis</h1>
          <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstleyVEVO"><button type="button" class="btn btn-dark btn-lg download-buttonApple"><i class="fab fa-apple"></i> Download</button></a>
         <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ&ab_channel=RickAstleyVEVO"><button type="button" class="btn btn-outline-light btn-lg download-buttonGoogle"><i class="fab fa-google-play"></i> Download</button></a>

        </div>
        <div class="col-lg-6 col-md-12 col-sm-12">
          <img class=title-img src="Solaris.png" alt="Solaris">
        </div>

      </div>


    </div>
    </section>

<section id = "features">

  <div class = "row">

  <div class = "feature-box col-lg-4 col-md-4 col-sm-12">
    <i class="fa-solid fa-file-arrow-up fa-4x fa-fw icon-features"></i>
    <h3>Upload your Sample</h3>
    <p>Start with uploading your patient VCF file</p>
  </div>

  <div class = "feature-box col-lg-4 col-md-4 col-sm-12">
    <i class="fa-solid fa-wave-square fa-4x fa-fw icon-features"></i>
    <h3>Calculate</h3>
    <p>Wait for us to calculate your polygenic risk score</p>
  </div> 

  <div class = "feature-box col-lg-4 col-md-4 col-sm-12">
    <i class="fa-solid fa-chart-line fa-4x fa-fw icon-features"></i>
    <h3>Analyze</h3>
    <p>Analyze your scores with graphs for each patient</p>
  </div>

  </div>
  


</section>

<section id = "upload">
  <div class = "row overflow-hidden" id="upload-content">

    <div class="upload-box col-lg-4 col-md-4 col-sm-12" id = "upload-main">
      <div id ="fileInput"></div>
    </div>
    <py-env>
      - bokeh
      - numpy
      - panel
      - pandas
      - bokeh

        </py-env>

       <p>
      This example shows how to call the File System Access APIs. These APIs permit local file system access.
    </p>
    <div id="output"></div>
    <br />
    <button class="button" type="button" id="file_save">Write Local File</button>
    <br />
    <br />
    <h4>File Contents:</h4>
    <form action="/action_page.php">
      <input type="file" id="myFile" name="filename">
      <input type="Upload">
    </form>
    <py-script output="output">
import asyncio
import sys
from js import alert, document, Object, window
from pyodide import create_proxy, to_js

async def file_save(event):
	# Note: print() does not work in event handlers

	try:
		options = {
			"startIn": "documents",
			"suggestedName": "Sample.vcf"
		}

		fileHandle = await window.showSaveFilePicker(Object.fromEntries(to_js(options)))
	except Exception as e:
		console.log('Exception: ' + str(e))
		return

  
  
	content = document.getElementById("myFile").value

	file = await fileHandle.createWritable()
	await file.write(content)
	await file.close()
	return

def setup_button():
	# Create a Python proxy for the callback function
	file_save_proxy = create_proxy(file_save)

	# Set the listener to the callback
	document.getElementById("file_save").addEventListener("click", file_save_proxy, False)

setup_button()
    </py-script>
  
    <div class = "feature-box col-lg-4 col-md-4 col-sm-12">
      <i class="fa-solid fa-file-import fa-10x fa-fw upload-img"></i>
    <p class = "upload-txt">Analyze your scores with graphs for each patient</p>
  </div>


  </div>
</section>


<section id = "calculate">
 
</section>


<section id = "Results">
 
</section>







</body>
</html>
